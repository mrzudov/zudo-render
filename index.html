<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Zudo Render</title>
</head>
<body style="background:#000;color:#0f0;text-align:center;font-family:sans-serif;">
  <h1>Zudo Render 🧠</h1>
  <input type="file" id="imageInput"><br><br>
  <input type="text" id="promptInput" placeholder="Nhập prompt mô tả" size="50"><br><br>
  <button id="renderButton">🚀 Render</button>
  <p id="status"></p>
  <div style="display:flex;justify-content:center;gap:20px;margin-top:20px;">
    <div>
      <h4>Ảnh gốc</h4>
      <img id="originalImage" style="max-width:300px;border:1px solid #0f0;">
    </div>
    <div>
      <h4>Kết quả</h4>
      <img id="resultImage" style="max-width:300px;border:1px solid #0f0;">
    </div>
  </div>

<script>
  const imageInput = document.getElementById("imageInput");
  const promptInput = document.getElementById("promptInput");
  const renderButton = document.getElementById("renderButton");
  const statusText = document.getElementById("status");
  const originalImage = document.getElementById("originalImage");
  const resultImage = document.getElementById("resultImage");

  renderButton.onclick = async () => {
    const file = imageInput.files[0];
    const prompt = promptInput.value;

    if (!file) return alert("Vui lòng chọn ảnh!");

    const formData = new FormData();
    formData.append("image", file);
    formData.append("prompt", prompt);

    renderButton.disabled = true;
    statusText.textContent = "⏳ Đang gửi ảnh đến AI...";

    originalImage.src = URL.createObjectURL(file);

    try {
      const res = await fetch("/render", { method: "POST", body: formData });
      const data = await res.json();

      if (res.ok) {
        resultImage.src = data.image_url;
        statusText.textContent = "✅ Render hoàn tất!";
      } else {
        statusText.textContent = "❌ " + (data.error || "Render thất bại!");
      }
    } catch (err) {
      statusText.textContent = "❌ Lỗi mạng: " + err.message;
    } finally {
      renderButton.disabled = false;
    }
  };
</script>
</body>
</html>
