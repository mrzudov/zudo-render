
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Zudo Render</title>
  <style>
    body { background: #000; color: #0f0; font-family: monospace; text-align: center; padding: 20px; }
    h1 { color: red; }
    textarea, input, select { width: 80%; padding: 10px; margin: 10px auto; font-size: 16px; background: #111; color: #0f0; border: 1px solid #0f0; }
    button { padding: 10px 20px; font-size: 16px; background: red; color: white; border: none; cursor: pointer; }
    img { max-width: 45%; margin: 10px; }
    .flex { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
    #status { margin-top: 10px; font-size: 14px; color: #ff0; }
  </style>
</head>
<body>
  <h1>üî• ZUDO RENDER üî•</h1>

  <select id="mode">
    <option value="text2img">üñºÔ∏è Text to Image</option>
    <option value="img2img">üñåÔ∏è Image to Image</option>
  </select>

  <br/>
  <textarea id="prompt" rows="6" placeholder="Nh·∫≠p prompt c·ª±c ng·∫ßu v√†o ƒë√¢y nh√©..."></textarea>
  <br/>
  <input type="file" id="imageInput" accept="image/*" />
  <br/>
  <button onclick="renderImage()">üöÄ Render</button>

  <p id="status"></p>
  <div class="flex" id="result"></div>

  <script>
    async function renderImage() {
      const mode = document.getElementById("mode").value;
      const prompt = document.getElementById("prompt").value.trim();
      const imageInput = document.getElementById("imageInput");
      const status = document.getElementById("status");
      const result = document.getElementById("result");

      if (!prompt) return alert("Nh·∫≠p prompt ƒëi √¥ng n·ªôi!");
      if (mode === "img2img" && !imageInput.files[0]) return alert("Ch·ªçn ·∫£nh g·ªëc ƒë·ªÉ Image-to-Image!");

      const formData = new FormData();
      formData.append("prompt", prompt);
      if (mode === "img2img") formData.append("image", imageInput.files[0]);

      status.textContent = "‚è≥ ƒêang render...";
      result.innerHTML = "";

      const endpoint = mode === "text2img" ? "/text2img" : "/render";

      try {
        const res = await fetch(endpoint, {
          method: "POST",
          body: formData
        });
        const data = await res.json();

        if (data.image_url) {
          status.textContent = "‚úÖ Render th√†nh c√¥ng!";
          result.innerHTML = `
            ${mode === "img2img" ? `<img src="${URL.createObjectURL(imageInput.files[0])}" alt="·∫¢nh g·ªëc" />` : ""}
            <img src="${data.image_url}" alt="·∫¢nh render" />
          `;
        } else {
          status.textContent = "‚ùå L·ªói render: " + (data.error || "Kh√¥ng r√µ l·ªói");
        }
      } catch (err) {
        status.textContent = "‚ùå L·ªói k·∫øt n·ªëi: " + err.message;
      }
    }
  </script>
</body>
</html>
