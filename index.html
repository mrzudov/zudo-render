<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Zudo Render</title>
</head>
<body style="background:#000;color:#0f0;text-align:center;font-family:sans-serif;">
  <h1>Zudo Render 🧠</h1>
  <input type="file" id="imageInput"><br><br>
  <input type="text" id="promptInput" placeholder="Nhập prompt mô tả" size="50"><br><br>
  <button id="renderButton">🚀 Render</button>
  <p id="status"></p>
  <div style="display:flex;justify-content:center;gap:20px;margin-top:20px;">
    <div>
      <h4>Ảnh gốc</h4>
      <img id="originalImage" style="max-width:300px;border:1px solid #0f0;">
    </div>
    <div>
      <h4>Kết quả</h4>
      <img id="resultImage" style="max-width:300px;border:1px solid #0f0;">
    </div>
  </div>
  
<script>
document.getElementById("imageForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const imageInput = document.getElementById("imageInput");
  const prompt = document.getElementById("prompt").value;

  if (!imageInput.files[0]) {
    alert("Vui lòng chọn ảnh.");
    return;
  }

  const formData = new FormData();
  formData.append("image", imageInput.files[0]);
  formData.append("prompt", prompt);

  try {
    const response = await fetch("https://zudo-render.onrender.com/render", {
      method: "POST",
      body: formData // ĐỪNG set headers thủ công
    });

    const result = await response.json();

    if (result.result) {
      document.getElementById("output").innerHTML = `
        <h3>Ảnh đã render:</h3>
        <img src="data:image/png;base64,${result.result}" style="max-width: 100%;" />
      `;
    } else {
      alert("Render thất bại.");
    }
  } catch (error) {
    console.error(error);
    alert("Lỗi khi kết nối tới server.");
  }
});
</script>
</body>
</html>
