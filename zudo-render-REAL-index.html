
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Zudo Render – AI Kiến Tạo Đỉnh Cao</title>
<style>
body {
background-color: #000;
color: #eee;
font-family: 'Arial', sans-serif;
text-align: center;
padding: 40px;
}
h1 {
color: #ff0000;
text-shadow: 2px 2px 6px #0f0;
}
input, textarea, button {
margin: 10px;
padding: 10px;
font-size: 16px;
width: 80%;
max-width: 500px;
border: none;
border-radius: 6px;
}
input[type="file"] {
background-color: #222;
color: #0f0;
}
textarea {
height: 100px;
}
button {
background-color: #ff0000;
color: #fff;
cursor: pointer;
}
button:hover {
background-color: #0f0;
color: #000;
}
#preview {
margin-top: 30px;
border: 2px solid #0f0;
padding: 10px;
display: none;
}
img {
max-width: 100%;
height: auto;
}
</style>
</head>
<body>

<h1>Zudo Render</h1>
<p><i>AI kiến tạo phối cảnh đỉnh cao</i></p>

<input type="file" id="imageInput" accept="image/*"><br>
<textarea id="promptInput" placeholder="Nhập prompt mô tả cảnh cần render..."></textarea><br>
<button onclick="renderImage()">Render bằng AI</button>

<div id="preview">
<h2>Ảnh Render:</h2>
<img id="renderedImage" src="">
</div>

<script>
async function renderImage() {
  const prompt = document.getElementById('promptInput').value;
  const imageInput = document.getElementById('imageInput');
  if (!prompt || !imageInput.files[0]) {
    alert("Vui lòng chọn ảnh và nhập prompt!");
    return;
  }

  const formData = new FormData();
  formData.append("image", imageInput.files[0]);

  // Upload ảnh lên hosting tạm (imgbb)
  const imgbbKey = "20b69694ddc40c7bd82d8a37ee54eb70"; // demo key công khai
  const uploadResp = await fetch("https://api.imgbb.com/1/upload?key=" + imgbbKey, {
    method: "POST",
    body: formData
  });
  const uploadData = await uploadResp.json();
  const imageUrl = uploadData.data.url;

  // Gửi prompt và ảnh tới backend render
  const response = await fetch("https://zudo-render.vercel.app/api/render", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ prompt: prompt, image_url: imageUrl })
  });

  const result = await response.json();
  if (result.image_url) {
    document.getElementById("renderedImage").src = result.image_url;
    document.getElementById("preview").style.display = "block";
  } else {
    alert("Render thất bại: " + (result.error || "Không rõ lỗi"));
  }
}
</script>

</body>
</html>
